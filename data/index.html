<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example with a side menu that hides on mobile, just like the Pure website.">
    <title>WLANThermo - Nano</title>
</head>
<body>

<div id="layout">
	<div class="headmenu">
    <!-- Menu toggle -->
    <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
	<div class="loginname">N.C.</div>
	<div class="battery">N.C.</div>
	<div class="wifi">N.C.</div>
	</div>
	<div class="clear"></div>

    <div id="menu">
        <div class="pure-menu">
		<a class="pure-menu-heading" href="javascript:showIndex()"><img src="nano.png" alt="WLANThermo" height="58" width="130"> </a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><a href="javascript:showIndex()" class="pure-menu-link">Home</a></li>
				<li class="pure-menu-item"><a href="javascript:showPlot()" class="pure-menu-link">Plot</a></li>
                <li class="pure-menu-item"><a href="javascript:showChannel()" class="pure-menu-link">Kanal</a></li>
				<li class="pure-menu-item"><a href="javascript:showWLAN()" class="pure-menu-link">WLAN</a></li>
				<li class="pure-menu-item"><a href="javascript:showSystem()" class="pure-menu-link">System</a></li>
				<li class="pure-menu-item"><a href="javascript:showPitmaster()" class="pure-menu-link">Pitmaster</a></li>
				<li class="pure-menu-item"><a href="javascript:showChart()" class="pure-menu-link">Chart Dienste</a></li>
                <li class="pure-menu-item"><a href="javascript:showAbout()" class="pure-menu-link">Über</a></li>
            </ul>
        </div>
    </div>

    <div id="main">
        <div class="header">
            <h1>WLANThermo - Nano</h1>
        </div>
		<!-- ################################################### -->
        <div id="index" class="content" class="hidden" style="display:none">
            <div class="pure-g">
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
                <div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index">
					<div class="1-box channel">
						<div class="chtitle">N.C.</div>
						<div class="chnumber">N.C.</div>
							<div class="tempadjust">
								<div class="tempmin">N.C.</div>
								<div class="tempmax">N.C.</div>
							</div>
							<div class="temp">N.C.</div>
							<div class="clear"></div>
					</div>
                </div>
            </div>
        </div>
		<!-- ################################################### -->
		<div id="wlan_config" class="content" style="display:none">
			<div class="pure-button-group" role="group">
				<button class="pure-button" onclick="showIndex()"><b><</b>Back</button>
			</div>
			<div class=".pure-g">
				<div class="pure-u-1-1">
						<label class="switch">
							<input type="checkbox">
							<div class="slider round"></div>
							<div class="checkbox_title">WLAN</div>
						</label>
						<table id="networkconnect" class="wlantable" width="100%">
							<!--Netzwerkliste -->
						</table> 					
					<h3>Netzwerk wählen...</h3>
					<table id="networklist" class="wlantable" width="100%">
							<!--Netzwerkliste -->
					</table> 
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="wlan_set" class="content" style="display:none">
			<div class="pure-button-group" role="group">
				<button class="pure-button" onclick="showWLAN()"><b><</b>Back</button>
				<button class="pure-button" onclick="setWLAN(document.getElementsByName('ssidInput')[0].value, document.getElementsByName('ssidPasswordInput')[0].value)">Verbinden<b>></b></button>
			</div>
			<div class=".pure-g">
				<div class="pure-u-1-1">					
					<h3>Netzwerk Verbinden</h3>
					<input name="ssidInput" type="text" placeholder="SSID" readonly>
					<input name="ssidPasswordInput" type="password" placeholder="Passwort" required /> 
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="channel_config" class="content" style="display:none">
			<h3 class="headtitle">Kanal Einstellungen</h3>
            <div class="pure-g">
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 1</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH1TMax">Temp.Max</label>
								<input id="CH1TMax" type="CH1TMax" placeholder="Temp.Max">

								<label for="CH1TMin">Temp.Min</label>
								<input id="CH1TMin" type="CH1TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 2</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH2TMax">Temp.Max</label>
								<input id="CH2TMax" type="CH2TMax" placeholder="Temp.Max">

								<label for="CH2TMin">Temp.Min</label>
								<input id="CH2TMin" type="CH2TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 3</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH3TMax">Temp.Max</label>
								<input id="CH3TMax" type="CH3TMax" placeholder="Temp.Max">

								<label for="CH3TMin">Temp.Min</label>
								<input id="CH3TMin" type="CH3TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 4</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH4TMax">Temp.Max</label>
								<input id="CH4TMax" type="CH4TMax" placeholder="Temp.Max">

								<label for="CH4TMin">Temp.Min</label>
								<input id="CH4TMin" type="CH4TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 5</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH5TMax">Temp.Max</label>
								<input id="CH5TMax" type="CH5TMax" placeholder="Temp.Max">

								<label for="CH5TMin">Temp.Min</label>
								<input id="CH5TMin" type="CH5TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 6</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH6TMax">Temp.Max</label>
								<input id="CH6TMax" type="CH6TMax" placeholder="Temp.Max">

								<label for="CH6TMin">Temp.Min</label>
								<input id="CH6TMin" type="CH6TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 7</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH7TMax">Temp.Max</label>
								<input id="CH7TMax" type="CH7TMax" placeholder="Temp.Max">

								<label for="CH7TMin">Temp.Min</label>
								<input id="CH7TMin" type="CH7TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
				
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
						<h3>Kanal 8</h3>
							<form class="pure-form pure-form-stacked">
								<fieldset>

								<label for="CH8TMax">Temp.Max</label>
								<input id="CH8TMax" type="CH8TMax" placeholder="Temp.Max">

								<label for="CH8TMin">Temp.Min</label>
								<input id="CH8TMin" type="CH8TMin" placeholder="Temp.Min">
								
								<label for="sensor">F&uuml;hler</label>
								<select id="sensor">
									<option>Fantast</option>
									<option>Maverick</option>
									<option>WlanThermo</option>
								</select>
								
								<label for="color">Farbe</label>
								<select id="color">
									<option>rot</option>
									<option>blau</option>
									<option>gelb</option>
								</select>
								
								<label for="websound">
								<input id="websound" type="checkbox"> WebSound Alarm
								</label>
								
								</fieldset>
							</form>
					</div>
				</div>
			</div>
			<div class="footer_buttons">
				<button class="button-success pure-button">Speichern</button>
				<button class="button-error pure-button">Abbrechen</button>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="system_config" class="content" style="display:none">
			<!-- html for about-Site -->
			<h3 class="headtitle">System Einstellungen</h3>
			<div class="pure-g">
				<div class="pure-u-1-1">
					<div class="1-box channel_conf">
						<form class="pure-form pure-form-stacked">
							<fieldset>
								<label for="hostname">Hostname</label>
								<input id="hostname" type="hostname" placeholder="Hostname">
								
								<label for="timezone">Zeitzone</label>
								<select id="timezone">
									<option>MEZ</option>
									<option>MEZ+1</option>
									<option>MEZ-1</option>
								</select>
								
								<label for="language">Sprache</label>
								<select id="language">
									<option>deutsch</option>
									<option>englisch</option>
									<option>französisch</option>
								</select>
								
								<label for="unit">Einheit</label>
								<select id="unit">
									<option>C</option>
									<option>F</option>
								</select>
								
								<label class="switch">
									<input type="checkbox">
									<div class="slider round"></div>
									<div class="checkbox_title">Hardwarealarm</div>
								</label>
							</fieldset>
						</form>
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="pitmaster_config" class="content" style="display:none">
			<!-- html for about-Site -->
			<h3 class="headtitle">Pitmaster Einstellungen</h3>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="chart_config" class="content" style="display:none">
			<!-- html for about-Site -->
			<h3 class="headtitle">Chart Dienste</h3>
			<div class="pure-g">
				<div class="pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4">
					<div class="1-box channel_conf">
					</div>
				</div>
			</div>
        </div>
		<!-- ################################################### -->
		<div id="plot" class="content" style="display:none">
			<!-- html for config-Site -->
			<h1>WLANThermo - plot site</h1>
        </div>
		<!-- ################################################### -->
		<div id="about" class="content" style="display:none">
			<!-- html for about-Site -->
			<h1>WLANThermo - about site</h1>
        </div>
		<!-- ################################################### -->
    </div>
</div>

<script src="ui.js"></script>
<script>
	loadjscssfile('style.css','css');
	setInterval("readTemp();", 2000);
	document.getElementById("index").style.display = "inline";
	
	function showWLAN(){
		hideAll();
		document.getElementById("wlan_config").style.display = "inline";
		networklist();
		networkscan();
	}
	
	function showPlot(){
		hideAll();
		document.getElementById("plot").style.display = "inline";
	}	

	function showSetWLAN(){
		hideAll();
		document.getElementById("wlan_set").style.display = "inline";
	}	
	
	function setWLAN(ssid, passwd){
		var data='{"ssid":"' + ssid + '","password":"' + passwd + '"}';
		//alert(data);
		loadJSON('setnetwork', data, function (response) {
			alert(data + response);
			showWLAN();
		})
	}

	function showChannel(){
		hideAll();
		document.getElementById("channel_config").style.display = "inline";
	}	
	
	function showSystem(){
		hideAll();
		document.getElementById("system_config").style.display = "inline";
	}	
	
	function showPitmaster(){
		hideAll();
		document.getElementById("pitmaster_config").style.display = "inline";
	}	
	
	function showChart(){
		hideAll();
		document.getElementById("chart_config").style.display = "inline";
	}	
	
	function showIndex(){
		hideAll();
		document.getElementById("index").style.display = "inline";
	}	
	function showAbout(){
		hideAll();
		document.getElementById("about").style.display = "inline";
	}	

	function hideAll(){
		document.getElementById("index").style.display = "none";
		document.getElementById("wlan_config").style.display = "none";
		document.getElementById("channel_config").style.display = "none";
		document.getElementById("system_config").style.display = "none";
		document.getElementById("pitmaster_config").style.display = "none";
		document.getElementById("chart_config").style.display = "none";
		document.getElementById("plot").style.display = "none";
		document.getElementById("about").style.display = "none";
		document.getElementById("wlan_set").style.display = "none";
	}
    function loadJSON(url, data, callback) {
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('POST', url, true);
        xobj.setRequestHeader("Content-Type", "application/json");
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // .open will NOT return a value but simply returns undefined in async mode so use a callback
                callback(xobj.responseText);
            }
        }
        xobj.send(data);
    }
	
	function readTemp(){
		loadJSON('data', '', function (response) {
		//loadJSON(function(response) {	
			jsonresponse = JSON.parse(response);
			document.getElementsByClassName("battery")[0].innerHTML = jsonresponse.system.soc + "%";
			document.getElementsByClassName("wifi")[0].innerHTML = jsonresponse.system.rssi + "dBm";
			var x = document.getElementsByClassName("pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-4 temp_index");
			var i;
			for (i = 0; i < x.length; i++) {
				x[i].getElementsByClassName('1-box channel')[0].style.borderColor = jsonresponse.channel[i].color;
				x[i].getElementsByClassName('chtitle')[0].innerHTML = jsonresponse.channel[i].name;
				x[i].getElementsByClassName('chnumber')[0].innerHTML = "#" + jsonresponse.channel[i].number;
				x[i].getElementsByClassName('tempmin')[0].innerHTML = jsonresponse.channel[i].min + "°";
				x[i].getElementsByClassName('tempmax')[0].innerHTML = jsonresponse.channel[i].max + "°";
				x[i].getElementsByClassName('temp')[0].innerHTML = jsonresponse.channel[i].temp + "°" + jsonresponse.system.unit;					
			}

		})
	}
	
	function readSettings(){
		loadJSON('settings', '', function (response) {
			jsonresponse = JSON.parse(response);
		})
	}
	
   function loadjscssfile(filename, filetype) {
                if (filetype == "js") { //if filename is a external JavaScript file
                    var fileref = document.createElement('script')
                    fileref.setAttribute("type", "text/javascript")
                    fileref.setAttribute("src", filename)
                    alert('called');
                }
                else if (filetype == "css") { //if filename is an external CSS file
                    var fileref = document.createElement("link")
                    fileref.setAttribute("rel", "stylesheet")
                    fileref.setAttribute("type", "text/css")
                    fileref.setAttribute("href", filename)
                }
                if (typeof fileref != "undefined")
                    document.getElementsByTagName("head")[0].appendChild(fileref)
    }
	function networkscan(){
		loadJSON('networkscan', '', function (response) {
			if (response == "OK"){
				setTimeout("networklist();", 3000);
			}
		})
	}
	function networklist(){
		loadJSON('networklist', '', function (response) {
			jsonresponse = JSON.parse(response);
			document.getElementById("networklist").innerHTML = '';
			document.getElementById("networkconnect").innerHTML = '';
			var table_networklist = document.getElementById("networklist");
			var table_networkconnect = document.getElementById("networkconnect");
			if (jsonresponse.Connect){			
				var row = table_networkconnect.insertRow(0);
				var cell1 = row.insertCell(0);
				var cell2 = row.insertCell(1);
				var cell3 = row.insertCell(2);
				var cell4 = row.insertCell(3);
				cell1.innerHTML = '&#10003;';
				cell1.className = 'row-Check';
				cell2.innerHTML = jsonresponse.SSID;
				cell2.className = 'row-SSID';
				cell3.innerHTML = jsonresponse.RSSI + 'dBm';
				cell3.className = 'row-RSSI';
				cell4.innerHTML = jsonresponse.Enc;
				cell4.className = 'row-Enc';	
			}
			NetworkconnectRowClick();
			for (var i = 0; i < jsonresponse.Scan.length; i++) {
				var row = table_networklist.insertRow(-1);
				var cell1 = row.insertCell(0);
				cell1.className = 'row-Check';
				var cell2 = row.insertCell(1);
				var cell3 = row.insertCell(2);
				var cell4 = row.insertCell(3);
				cell1.innerHTML = '';
				cell1.className = 'row-Check';
				cell2.innerHTML = jsonresponse.Scan[i].SSID;
				cell2.className = 'row-SSID';
				cell3.innerHTML = jsonresponse.Scan[i].RSSI + 'dBm';
				cell3.className = 'row-RSSI';
				cell4.innerHTML = jsonresponse.Scan[i].Enc;	
				cell4.className = 'row-Enc';
			}
			NetworklistRowClick();
		})
	}
	
	function NetworklistRowClick() {
		var table = document.getElementById("networklist");
		var rows = table.rows; // or table.getElementsByTagName("tr");
		for (var i = 0; i < rows.length; i++) {
			rows[i].onclick = (function() { // closure
				var cnt = i; // save the counter to use in the function
				return function() {
					showSetWLAN();
					//alert("row"+cnt+" data="+this.cells[1].innerHTML);
					//document.getElementsByName('ssidInput')[0].placeholder=this.cells[1].innerHTML;
					document.getElementsByName('ssidInput')[0].value = this.cells[1].innerHTML;
					document.getElementsByName('ssidPasswordInput')[0].value = null;
				}    
			})(i);
		}
	}
	
	function NetworkconnectRowClick() {
		var table = document.getElementById("networkconnect");
		var rows = table.rows; // or table.getElementsByTagName("tr");
		for (var i = 0; i < rows.length; i++) {
			rows[i].onclick = (function() { // closure
				var cnt = i; // save the counter to use in the function
				return function() {
				  alert("row"+cnt+" data="+this.cells[1].innerHTML);
				}    
			})(i);
		}
	}
	readTemp();
</script>

</body>
</html>
